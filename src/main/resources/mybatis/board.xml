<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="board">

    <select id="list" resultType="Board">
        SELECT *
        FROM yourtrip.board
        <if test="kind == 1">
            where board_Title LIKE CONCAT(CONCAT('%',#{keyword}),'%')
        </if>
        <if test="kind == 2">
            where board_Num = #{keyword}
        </if>
        <if test="kind == 3">
            where board_Write LIKE CONCAT(CONCAT('%',#{keyword}),'%')
        </if>
    </select>

    <insert id="add">
        INSERT INTO yourtrip.board
        (BOARD_NUM, BOARD_TITLE, BOARD_CONTENT, BOARD_HIT, BOARD_RECOMMEND, BOARD_WRITE, BOARD_DATE)
        VALUES (NULL, #{boardTitle}, #{boardContent}, 0, 0, 'ADMIN', NOW())
    </insert>

    <select id="item" resultType="Board">
        SELECT *
        FROM yourtrip.board
        WHERE board_Num = #{boardNum}
    </select>

    <delete id="delete">
        DELETE
        FROM yourtrip.board
        WHERE board_Num = #{boardNum}
    </delete>

    <update id="update">
        UPDATE yourtrip.board
        SET board_Title   = #{boardTitle},
            board_Content = #{boardContent}
        WHERE board_Num = #{boardNum}
    </update>

    <select id="recommendCheck" resultType="Integer">
        select count(*)
        from yourtrip.recommend
        where recommend_board_num = #{boardNum}
    </select>

    <update id="recommend">
        update yourtrip.board
        set board_Recommend = board_Recommend + 1
        where board_Num = #{boardNum}
    </update>

    <insert id="recommendInsert">
        INSERT yourtrip.recommend
        VALUES (NULL, 1, #{boardNum})
    </insert>
</mapper>
